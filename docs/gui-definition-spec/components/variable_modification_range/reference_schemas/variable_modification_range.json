{
    "variable_modification_range": {
        "type": "object",
        "description": "Schema for the ion_channel_range_variable_modification UI element. Used to modify RANGE NMODL variables per section list (e.g., somatic, axonal). The UI presents a two-step flow: Step 1 selects a variable from a grouped dropdown (ion channel -> variable), Step 2 shows per-section-list numeric inputs with units.",
        "properties": {
            "ui_element": {
                "type": "string",
                "const": "ion_channel_range_variable_modification",
                "description": "Must be 'ion_channel_range_variable_modification'."
            },
            "title": {
                "type": "string",
                "description": "Title of the modification field shown in the UI."
            },
            "description": {
                "type": "string",
                "description": "Description of the modification field shown in the UI."
            },
            "property_group": {
                "type": "string",
                "const": "Circuit",
                "description": "The property group used to fetch available variables. Must be 'Circuit'."
            },
            "property": {
                "type": "string",
                "const": "IonChannelRangeVariables",
                "description": "The mapped circuit property key used to populate the variable dropdown. Must be 'IonChannelRangeVariables'."
            }
        },
        "required": ["ui_element", "title", "description", "property_group", "property"],
        "data_model": {
            "description": "The data model for the BySectionListModification object that this UI element populates.",
            "type": "object",
            "properties": {
                "ion_channel_id": {
                    "type": "string",
                    "description": "Entity ID of the ion channel (e.g., 'e1090418-c607-4901-88ae-a5ceb5bfb75a'). Set automatically when the user selects a variable."
                },
                "variable_name": {
                    "type": "string",
                    "description": "Name of the RANGE variable selected by the user (e.g., 'gCa_HVAbar_Ca_HVA2', 'gamma_CaDynamics_DC0')."
                },
                "section_list_modifications": {
                    "type": "object",
                    "description": "Mapping of section list names to new values. Section lists are populated from the ion channel's available section lists (e.g., somatic, axonal, apical, basal). Values can be a single float or a list of floats for per-compartment overrides.",
                    "patternProperties": {
                        "^(somatic|axonal|apical|basal|alldend|somadend|allnoaxon|somaxon|allact|all)$": {
                            "oneOf": [
                                {"type": "number"},
                                {"type": "array", "items": {"type": "number"}}
                            ]
                        }
                    }
                }
            },
            "required": ["ion_channel_id", "variable_name", "section_list_modifications"]
        },
        "sonata_output": {
            "description": "SONATA conditions.modifications entries generated by this block. One entry per expanded section list.",
            "example": {
                "conditions": {
                    "modifications": [
                        {
                            "name": "modify_gamma_CaDynamics_DC0_somatic",
                            "node_set": "single",
                            "type": "section_list",
                            "section_configure": "somatic.gamma_CaDynamics_DC0 = 0"
                        },
                        {
                            "name": "modify_gamma_CaDynamics_DC0_apical",
                            "node_set": "single",
                            "type": "section_list",
                            "section_configure": "apical.gamma_CaDynamics_DC0 = 200"
                        }
                    ]
                }
            }
        }
    }
}

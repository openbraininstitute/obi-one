{
    "variable_modification_global": {
        "type": "object",
        "description": "Schema for the ion_channel_global_variable_modification UI element. Used to modify GLOBAL NMODL variables that apply to the entire neuron (not per section list). The UI presents a two-step flow: Step 1 selects a variable from a grouped dropdown (ion channel -> variable), Step 2 shows a single NEW VALUE numeric input with units.",
        "properties": {
            "ui_element": {
                "type": "string",
                "const": "ion_channel_global_variable_modification",
                "description": "Must be 'ion_channel_global_variable_modification'."
            },
            "title": {
                "type": "string",
                "description": "Title of the modification field shown in the UI."
            },
            "description": {
                "type": "string",
                "description": "Description of the modification field shown in the UI."
            },
            "property_group": {
                "type": "string",
                "const": "Circuit",
                "description": "The property group used to fetch available variables. Must be 'Circuit'."
            },
            "property": {
                "type": "string",
                "const": "IonChannelGlobalVariables",
                "description": "The mapped circuit property key used to populate the variable dropdown. Must be 'IonChannelGlobalVariables'."
            }
        },
        "required": ["ui_element", "title", "description", "property_group", "property"],
        "data_model": {
            "description": "The data model for the ByNeuronModification object that this UI element populates.",
            "type": "object",
            "properties": {
                "ion_channel_id": {
                    "type": "string",
                    "description": "Entity ID of the ion channel (e.g., '13c947c3-cb76-4a9a-91f4-146e95bd25f3'). Set automatically when the user selects a variable."
                },
                "channel_name": {
                    "type": "string",
                    "description": "Channel suffix used as the key in SONATA conditions.mechanisms (e.g., 'NaTg', 'CaDynamics_DC0'). Set automatically when the user selects a variable."
                },
                "variable_name": {
                    "type": "string",
                    "description": "Name of the GLOBAL variable selected by the user (e.g., 'gamma_CaDynamics_DC0', 'ena_NaTg')."
                },
                "new_value": {
                    "oneOf": [
                        {"type": "number"},
                        {"type": "array", "items": {"type": "number"}}
                    ],
                    "description": "New value for the GLOBAL variable. A single float applies the same value to all neurons; a list applies per-neuron values."
                }
            },
            "required": ["ion_channel_id", "channel_name", "variable_name", "new_value"]
        },
        "sonata_output": {
            "description": "SONATA conditions.mechanisms entry generated by this block. Keyed by channel suffix, containing the variable name and new value.",
            "example": {
                "conditions": {
                    "mechanisms": {
                        "CaDynamics_DC0": {
                            "gamma_CaDynamics_DC0": 0
                        }
                    }
                }
            }
        }
    }
}
